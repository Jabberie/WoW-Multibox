{
    "$schema": "http://www.lavishsoft.com/schema/lgui2Package.json",     
    "templates":{
        "basicRoundRobin.profileView":{
            "jsonTemplate":"listboxitem",
            "padding":2,
            "content":{
              "type":"textblock",
              "textBinding":{
                "pullFormat":"${LGUI2.DataBindingContext.Locate[\"\",itemview,ancestor].Item.Data.Get[name]}",
                "pullReplaceNull":""
              }
            }
        },
        "basicRoundRobin.overrideView":{
            "jsonTemplate":"listboxitem",
            "padding":2,
            "content":{
                "type":"dockpanel",
                "children":[
                    {
                      "_dock":"right",
                      "type":"button",
                      "content":"X",
                      "eventHandlers":{
                          "onRelease":{
                              "type":"method",
                              "object":"BRRUplink",
                              "method":"OnRemoveOverride"
                          }
                      }  
                    },
                    {
                        "_dock":"right",
                        "type":"checkbox",
                        "content":"Allow",
                        "checkedBinding":{
                            "pullFormat":"${LGUI2.DataBindingContext.Locate[\"\",itemview,ancestor].Item.Data.Get[allow]}",
                            "pullReplaceNull":"",
                            "pushFormat":["BRRUplink:SetAllowValue[\"${LGUI2.DataBindingContext.Locate[\"\",itemview,ancestor].Item.Data.Get[key]~}\",","]"]
                        },
                        "margin":[0,0,5,0]
                    },
                    {
                        "_dock":"right",
                        "type":"checkbox",
                        "content":"Ignore",
                        "checkedBinding":{
                            "pullFormat":"${LGUI2.DataBindingContext.Locate[\"\",itemview,ancestor].Item.Data.Get[ignore]}",
                            "pullReplaceNull":"",
                            "pushFormat":["LGUI2.DataBindingContext.Locate[\"\",itemview,ancestor].Item.Data:Set[ignore,","]"]
                        },
                        "margin":[0,0,5,0]
                    },
                    {
                        "_dock":"left",
                        "type":"textblock",
                        "textBinding":{
                         "pullFormat":"${LGUI2.DataBindingContext.Locate[\"\",itemview,ancestor].Item.Data.Get[key]}",
                          "pullReplaceNull":""
                        },
                        "margin":[0,0,25,0]
                    }
                ]
            }
        },
        "propertyview.listbox":{
            "jsonTemplate": "listbox",
            "type": "listbox"
        }
    },
    "elements": [
        {
            "type":"panel",
            "visibility":"hidden",
            "name":"basicRoundRobin.events"
        },
        {
            "type": "window",
            "name": "basicRoundRobin.window",
            "title": "Basic Round-Robin",
            "visibility":"visible",
            "width":500,
            "content":{
                "type":"stackpanel",
                "backgroundBrush":{
                    "color":"#FF003322"
                },
                "padding":20,
                "children":[
                    {
                        "type":"textblock",
                        "text":"Joe Multiboxer: Basic Round-Robin",
                        "margin":5,
                        "font":{
                            "bold":true,
                            "face":"Verdana",
                            "heightFactor":1.5
                        }
                    },
                    {
                        "type":"stackpanel",
                        "horizontalContentAlignment":"left",
                        "font":{
                          "heightFactor":1.2  
                        },
                        "children":[
                            {
                                "type":"dockpanel",
                                "_dock":"top",
                                "height":28,
                                "horizontalAlignment":"stretch",
                                "children":[
                                    {
                                        "type":"button",
                                        "_dock":"right",
                                        "content":"X",
                                        "eventHandlers":{
                                            "onRelease":{
                                                "type":"method",
                                                "object":"BRRUplink",
                                                "method":"OnDeleteProfile"
                                            }
                                        }
                                    },
                                    {
                                        "type":"button",
                                        "_dock":"right",
                                        "content":"New",
                                        "eventHandlers":{
                                            "onRelease":{
                                                "type":"code",
                                                "code":"LGUI2.Element[brr.popupNewProfile]:ToggleOpen"
                                            }
                                        }
                                    },
                                    {
                                        "type":"popup",
                                        "name":"brr.popupNewProfile",
                                        "autoClose":true,
                                        "width":300,
                                        "margin":[-100,5,0,0],
                                        "padding":5,
                                        "content":{
                                            "type":"dockpanel",
                                            "horizontalAlignment":"stretch",
                                            "children":[
                                                {
                                                    "type":"stackpanel",
                                                    "_dock":"top",
                                                    "horizontalAlignment":"stretch",
                                                    "orientation":"horizontal",
                                                    "children":[
                                                        {
                                                            "type":"textblock",
                                                            "text":"Name",
                                                            "_dock":"left"                                                                    
                                                        },
                                                        {
                                                            "type":"textbox",
                                                            "horizontalAlignment":"stretch",
                                                            "margin":[5,0,0,0],
                                                            "_dock":"left",
                                                            "name":"brr.newProfileName",
                                                            "eventHandlers":{
                                                                "onRelease":{
                                                                    "type":"code",
                                                                    "code":"LGUI2.Element[brr.popupNewProfile]:ToggleOpen"
                                                                }
                                                            }                    
                                                        }                                                                            
                                                    ]
                                                },                                                     
                                                {
                                                    "margin":[0,5,0,0],
                                                    "type":"stackpanel",
                                                    "_dock":"right",
                                                    "orientation":"horizontal",
                                                    "children":[
                                                        {
                                                            "type":"button",
                                                            "content":"Copy Selected",
                                                            "eventHandlers":{
                                                                "onRelease":{
                                                                    "type":"method",
                                                                    "object":"BRRUplink",
                                                                    "method":"OnCopySelected"
                                                                }
                                                            }
                                                        },
                                                        {
                                                            "type":"button",
                                                            "margin":[5,0,0,0],
                                                            "content":"Make Empty",
                                                            "eventHandlers":{
                                                                "onRelease":{
                                                                    "type":"method",
                                                                    "object":"BRRUplink",
                                                                    "method":"OnNewEmptyProfile"
                                                                }
                                                            }
                                                        },
                                                        {
                                                            "type":"button",
                                                            "margin":[5,0,0,0],
                                                            "content":"Cancel",
                                                            "eventHandlers":{
                                                                "onRelease":{
                                                                    "type":"code",
                                                                    "code":"LGUI2.Element[brr.popupNewProfile]:ToggleOpen"
                                                                }
                                                            }                    
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "type":"textblock",
                                        "_dock":"left",
                                        "text":"Profile: ",
                                        "verticalAlignment":"center"
                                    },
                                    {
                                        "type":"combobox",
                                        "_dock":"left",
                                        "name":"brr.editingProfile",
                                        "horizontalAlignment":"stretch",
                                        "itemsBinding": {
                                            "pullFormat": "${BRRUplink.Settings.Profiles.AsJSON[array]}",
                                            "pullHook": {   
                                              "elementName": "basicRoundRobin.events",
                                              "flags": "global",
                                              "event": "onProfilesUpdated"
                                            }
                                          },
                                        "selectedItemBinding":{
                                            "pullFormat":"${BRRUplink.EditingProfile.Name}",
                                            "pullHook":{
                                                "elementName": "basicRoundRobin.events",
                                                "flags": "global",
                                                "event": "onEditingProfileChanged"
                                            },
                                            "pushFormat":["BRRUplink:SetEditingProfile[\"","\"]"]
                                        },
                                        "selectedItemBindingProperty":"name",
                                        "itemViewGenerators":{
                                            "default":{
                                              "type":"method",
                                              "object":"BRRUplink",
                                              "method":"GenerateItemView_Profile"
                                            }
                                        }
                                    }
                                ]
                            },                            
                            {
                                "type":"objectview",
                                "_dock":"top",
                                "horizontalAlignment":"stretch",
                                "objectBinding":{
                                    "pullFormat":"${BRRUplink.EditingProfile}",
                                    "pullHook":{
                                        "elementName": "basicRoundRobin.events",
                                        "flags": "global",
                                        "event": "onEditingProfileChanged"
                                    }
                                },
                                "properties":[
                                {
                                    "name":"Hotkey",
                                    "dataBinding":"LGUI2.DataBindingContext.Object.Hotkey",
                                    "editTemplate":"propertyview.inputBinding"
                                },
                                {
                                    "name":"Switch as Hotkey",
                                    "dataBinding":"LGUI2.DataBindingContext.Object.SwitchAsHotkey",
                                    "editTemplate":"propertyview.checkbox"                            
                                },
                                  {
                                    "name":"Default to Allow (blacklist specific keys)",
                                    "dataBinding":"LGUI2.DataBindingContext.Object.DefaultAllow",
                                    "editTemplate":"propertyview.checkbox"                            
                                  },
                                  {
                                    "name":"Include mouse buttons",
                                    "dataBinding":"LGUI2.DataBindingContext.Object.IncludeMouse",
                                    "editTemplate":"propertyview.checkbox"                            
                                  },
                                  {
                                      "name":"Key overrides",
                                      "-dataBinding":"LGUI2.DataBindingContext.Object.Overrides",
                                      "editTemplate":"propertyview.listbox",
                                      "controlData":{
                                          "maxSize":[600,200],
                                          "itemsBinding":{
                                            "pullFormat":"${LGUI2.DataBindingContext.Locate[\"\",propertyview,ancestor].Object.OverridesList}",
                                            "pullHook":{
                                                "elementType":"objectview",
                                                "flags": "ancestor",
                                                "event": "onObjectChanged"
                                            }
                                          },
                                          "hooks":{
                                            "onOverridesChanged":{
                                                "elementName":"basicRoundRobin.events",
                                                "flags":"global",
                                                "event":"onOverridesChanged",
                                                "eventHandler":{
                                                    "type":"forward",
                                                    "flags":"self",
                                                    "event":"pullItemsBinding"
                                                }
                                            }
                                          },
                                          "itemViewGenerators":{
                                            "default":{
                                              "type":"method",
                                              "object":"BRRUplink",
                                              "method":"GenerateItemView_Override"
                                            }
                                        }
                                      }
                                  }
                                ]
                            }
                        ]
                    },
                    {                                
                        "type":"inputpicker",
                        "_dock":"top",
                        "multipleControlMode":false,
                        "horizontalAlignment":"stretch",
                        "value":{
                            "control":"- Press buttons here to add overrides -"
                        },
                        "eventHandlers":{
                            "onValueChanged":{
                                "type":"method",
                                "object":"BRRUplink",
                                "method":"OnAddButton"
                            }
                        }
                    },
                    {
                        "type":"button",
                        "margin":[0,5,0,0],
                        "content":"Save and Apply",
                        "eventHandlers":{
                            "onRelease":{
                                "type":"method",
                                "object":"BRRUplink",
                                "method":"OnSave"
                            }
                        }
                    },
                    {
                        "type":"expander",
                        "margin":5,
                        "header":"More ...",
                        "expanded":false,
                        "content":{
                            "type":"stackpanel",
                            "orientation":"vertical",
                            "children":[                                
                                {
                                    "type":"button",
                                    "content":"Reload Basic Round-Robin",
                                    "margin":[5,5,5,0],
                                    "eventHandlers":{
                                        "onPress":{
                                            "type":"code",
                                            "code":"JMB.Agent[Basic Round-Robin]:Stop:Start"
                                        }
                                    }
                                }
                            ]
                        }
                    }
                ]
            }
        }
    ]
}